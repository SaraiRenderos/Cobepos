/* (file): C:\xampp\htdocs\Gitlab\EPM2929_E-commerce_Jumbo_Colombia\src\js\list.js
(name): jumbo-blacksip | (version): 2.0.0 | (date): Wed Apr 10 2019 11:32:33 GMT-0500 (GMT-05:00) | (author): Cencosud Ecommerce SA */ 
!function l(o,s,n){function c(t,e){if(!s[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(d)return d(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var a=s[t]={exports:{}};o[t][0].call(a.exports,function(e){return c(o[t][1][e]||e)},a,a.exports,l,o,s,n)}return s[t].exports}for(var d="function"==typeof require&&require,e=0;e<n.length;e++)c(n[e]);return c}({1:[function(e,t,r){"use strict";var h,u,g,c,m,i,o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],i=!0,a=!1,l=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){a=!0,l=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw l}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}h=jQuery,u=Fizzmod,g=window,m=void 0,i={shelfOptions:{page:1,quantity:1,order:""},activeFilters:{},activeFiltersMobileTemp:{},activeFiltersMobile:{},activeRequest:null,isRequesting:!1,reachedLimit:!1,searchFilterSlider:null,isCollectionPage:!1,collectionId:null,hiddenCategories:[{id:2000093,name:"hielo"},{id:2000162,name:"anchetas"},{id:2000050,name:"flores"},{id:2000047,name:"hierbas"},{id:2000090,name:"empanados"},{id:2000196,name:"-"},{id:2000207,name:"-"},{id:2000208,name:"-"},{id:2000232,name:"roedores"},{id:2000034,name:"peces"},{id:2000136,name:"bolsas"}],defaultOrder:"OrderByTopSaleDESC",featuredCollection:351,isFirstLoaded:!1,$featuredProducts:null,featuredClasses:null,initialize:function(){m=this,h(document).ready(m.documentReady)},documentReady:function(){m.setCategoryBannerSlider(),m.toggleViewType(),m.setAmount();var e=h("body");Aurora.isMobile()?(m.toggleSelectFilterMobile(),m.bindEventsMobile()):(m.toggleOpenFilter(),m.toggleSelectFilter()),m.removeFilterCounter(),m.clearAllFilters(),m.deactivateFilterFromList(),"empty-search-page"===e.attr("id")&&(m.departmentSlider(),m.emtpySearchText()),e.hasClass("no-disponible")&&(m.departmentSlider(),m.NonDisponibility()),e.hasClass("department")&&(Aurora.isMobile()||m.infiniteScroll(),m.departmentDescription(),m.departmentBrandSlider(),m.departmentCollectionSlider(),m.setDepartmentFilters(),e.hasClass("department-food")&&m.departmentFoodSubcategories(),e.hasClass("department-nonfood")&&m.departmentNonFoodSubcategories());e.hasClass("category")&&(Aurora.isMobile()||m.infiniteScroll(),m.compareEventListeners(),m.categoryTypeCheck(vtxctx),m.checkActiveFilters(),m.setCategoryFilters(),Aurora.isMobile()&&m.setCategoryFiltersMobile()),e.hasClass("department-temp")&&(m.setDepartmentFilters(),h("body").addClass("department"));e.hasClass("search-result")&&(Aurora.isMobile()||m.infiniteScroll(),m.compareEventListeners(),m.setDepartmentFilters(),m.addTermsAndConditions(),e.hasClass("search-result-simple")&&(m.setSearchTerm(),Aurora.isMobile()&&m.setSearchFiltersMobile()),e.hasClass("search-result-multiple")&&m.setSearchMultipleFilters()),m.listGetCurrent(),m.isCollectionPage&&m.setCollectionPage(),m.isCollectionPage||!e.hasClass("category")&&!e.hasClass("department")||m.setFeaturedProducts(),Aurora.isMobile()||m.floatingFilters();var t=m.verifyDefaultOrderMethod();m.defaultOrder=t||"OrderByTopSaleDESC";var r=h(elem.orderBySelect).find("option[value="+m.defaultOrder+"]").text();m.setOrderBySelect(r),m.setDefaultOrder(),m.showCleanFilters()},addTermsAndConditions:function(){if(h("body.search-result-simple .banner-tyc").find("p"))for(var e=h("body.search-result-simple .banner-tyc").find("p"),t=0;t<e.length;t++)try{var r=e[t].attributes[0].value,i=g.location.search.split(":")[1].split("&O")[0];e[t].style.display=i==r?"block":"none"}catch(e){console.warn("The URL has not the path correctly. ")}},isSearchPageFiltered:function(){return!1},showCleanFilters:function(){m.isSearchPageFiltered()&&h(".filters-mobile__actions, .filters-mobile__action--reset-search-filters").show()},setCollectionPage:function(){m.setCollectionBannerSlider(),m.setCollectionProductSlider()},setCollectionBannerSlider:function(){var e,r=h();(h(".adaptive-image").each(function(e,t){t.dataset.id==m.collectionId?(t.classList.add("swiper-slide"),r=r.add(t)):t.parentElement.removeChild(t)}),Aurora.setAdaptiveImagesByElements(r),0<r.length&&document.querySelector(".banner-collection-slider").classList.add("has-slides"),1<r.length)&&new Swiper(".swiper-container-banner-collection",(a(e={slidesPerView:1,paginationClickable:!0,effect:"fade",nextButton:".swiper-button-next-banner-collection",prevButton:".swiper-button-prev-banner-collection",pagination:".swiper-pagination-banner-collection"},"paginationClickable",!0),a(e,"breakpoints",{760:{nextButton:null,prevButton:null}}),e))},setCollectionProductSlider:function(){var e=g.location.search.match(/destacados=([^&]*)/);if(null!=e){var t=h(".product-collection-slider").addClass("has-slides"),r=e[1],i=Aurora.isMobile()?8:20;Aurora.getProductShelf("fq=H:"+r,1,i,i).done(function(e){t.removeClass("loading"),""==e||h.isEmptyObject(e)||void 0!==e.activeElement?t.removeClass("has-slider"):(t.find(".swiper-wrapper").append(h(e).find("> ul > li:not(.helperComplement)").addClass("swiper-slide")).end().addClass("ready"),new Swiper(".swiper-container-product-collection",{slidesPerView:5,slidesPerGroup:2,nextButton:".swiper-button-next-product-collection",prevButton:".swiper-button-prev-product-collection",breakpoints:{1350:{slidesPerView:4},1100:{slidesPerView:3},760:{slidesPerView:1,slidesPerGroup:1,nextButton:null,prevButton:null,pagination:".swiper-pagination-product-collection",paginationClickable:!0}}}),Aurora.setProductItemsData())})}},setDefaultOrder:function(){""!=m.defaultOrder&&(h(elem.orderBySelect).val(m.defaultOrder),m.getProductsFromOrderRequest(m.defaultOrder))},setFeaturedProducts:function(){Aurora.getProductShelf(m.categoryParam+"&fq=H:"+m.featuredCollection,1,8,8).done(function(e){""==e||h.isEmptyObject(e)||void 0!==e.activeElement||(m.$featuredProducts=h(e).find("> ul > li"),m.appendFeaturedProducts(),h(".shelf-view-list").length&&h(".product-item").addClass(elem.productItem.replace(".","")+"--inline"),u.Minicart.orderForm!=c&&Aurora.setProductCartAmount(vtexjs.checkout.orderForm.items),m.removeFeaturedProductsRepeated(),setTimeout(function(){Aurora.setProductItemsData()},200))})},getCategoriesFilters:function(e){var t=1<arguments.length&&arguments[1]!==c?arguments[1]:null,r=2<arguments.length&&arguments[2]!==c?arguments[2]:0;return null==t&&(t=h.Deferred()),h.get("/api/catalog_system/pub/facets/search/categorias/"+e).done(function(e){t.resolve(e)}).fail(function(){r<3?(r++,m.getCategoriesFilters(e,t,r)):t.reject()}),t.promise()},setDepartmentFilters:function(){var e=h(".search-single-navigator"),t=h("body").hasClass("department")?e.find("h4, h5"):e.find("h3, h4, h5");h(elem.filterCategories).find("span").remove(),t.each(function(e,t){var r=h(t).next("ul");if(r.children().length){if(h(t).is("h4")){var i='\n\t\t\t\t\t\t<fieldset class="refino category">\n\t\t\t\t\t\t\t<h5>Subcategorias</h5>\n\t\t\t\t\t\t\t<div>'+r.find("li a").get().map(function(e){return'<a href="'+e.href+'">'+e.innerText+"</a>"}).join("")+"</div>\n\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t";h(".search-multiple-navigator").prepend(i)}}else h(t).addClass("single-category");h("body").hasClass("search-result")&&h(t).is(":first-child")&&r.children().length?(r.andSelf().wrapAll("<fieldset class='open'/>"),r.fadeIn()):r.andSelf().wrapAll("<fieldset />")}),h(elem.filterCategories).addClass("ready")},setCategoryFilters:function(){Aurora.categoryStoreActions.getCategoryTree().then(function(e){var t=h(".search-multiple-navigator"),i=g.vtxctx;if(!i)return console.log("vtxctx not defined");var r=function(e){var t=1<arguments.length&&arguments[1]!==c&&arguments[1],r=function(e){var t=m.hiddenCategories.map(function(e){return e.id});return t.length&&(e.children=e.children.filter(function(e){return!~t.indexOf(e.id)})),e}(e).children.map(function(e){return'<a href="'+e.url+'" '+(e.id.toString()===i.categoryId?'class="active"':"")+">"+e.name+"</a>"}).join("");if(r.length)return"\n\t\t\t\t\t\t\t<fieldset "+(t?'class="open"':"")+">\n\t\t\t\t\t\t\t\t<h5>Subcategorias</h5>\n\t\t\t\t\t\t\t\t<div "+(t?'style="display: block"':"")+">\n\t\t\t\t\t\t\t\t\t"+r+"\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t\t"},a=e.filter(function(e){return e.id.toString()===i.departmentyId});if(!a.length)return console.log("Department not found");var l=a[0].children.filter(function(e){return e.id.toString()===i.categoryId});if(l.length){var o=l[0];t.prepend(r(o))}else{var s=a[0].children,n=s.filter(function(e){return e.children.some(function(e){return e.id.toString()===i.categoryId})})[0];if(void 0===n&&(n=s.reduce(function(e,t){return e.concat(t.children)},[]).filter(function(e){return e.children.some(function(e){return e.id.toString()===i.categoryId})})[0]),void 0===n)return console.log("Category not found");t.prepend(r(n,!0)),h(".filter-wrapper .titulo-sessao").text(n.name)}})},toggleOpenFilter:function(){var t=function(e){var t=h(e.currentTarget),r=t.parent(),i=t.next(),a=h(".open").children().eq(1);if(t.hasClass("single-category"))return!0;e.preventDefault(),a.slideUp(timeFx,function(){h(this).parent("fieldset").removeClass("open")}),r.hasClass("open")?(r.removeClass("open"),i.slideUp(timeFx)):(r.addClass("open"),i.slideDown(timeFx))};h(document).on("click",elem.filterGroupTitle,function(e){return t(e)}),h(document).on("click",elem.filterCategoryGroupTitle,function(e){return t(e)}),h(document).on("click",elem.filterDepartmentGroupTitle,function(e){return t(e)})},floatingFilters:function(){var d=h(".floating-filters"),u=0,m=h("#header").outerHeight(!0)+h(".wrapper.navigation").outerHeight(!0);if(d.length){var f=function(){0<arguments.length&&arguments[0]!==c&&arguments[0];return h(".floating-filters").height()<document.querySelector(".wrapper.prefooter").getBoundingClientRect().top},p=function(e,t){var r=g.innerHeight-t;h(".resultItemsWrapper").length&&h(".resultItemsWrapper").height()<r&&(r=h(".resultItemsWrapper").height()),h(".inner.product").length&&h(".inner.product").height()<r&&(r=h(".inner.product").height()),e.css({height:r,display:"block"})};p(d,m),h(g).on("headerScroll",function(e,t){p(d,m);var r=h("#vtex-callcenter__toolbar").height(),i=h(g).scrollTop(),a=h("body").hasClass("compare-active")?h(".compare-header").height():0,l=document.querySelector(".filter-wrapper").getBoundingClientRect().top,o=u<=i;if(o&&l<0){var s=Math.abs(Math.ceil(l))+10+r+a;f(s)&&d.css("top",s+"px")}else if(!o)if(l<0){var n=Math.abs(Math.ceil(l))+t+10+a;f(n)&&d.css("top",n+"px")}else{var c=i<60?0:-l+t+10+a;f(c)&&d.css("top",c+"px")}u=i})}},toggleSelectFilter:function(){var s=h(".active-filters"),n=s.find(".filters"),c=s.find(".filters-remove-all");h(document).on("change",elem.filterInput,function(e){var t=h(this),r=t.parent(),i=t.attr("rel"),a=t.val(),l=r.text(),o=r.closest("fieldset").find("h5").text();this.checked?(r.addClass("selected"),n.append("<div class='filter' data-value='"+a+"'>"+l+"</div>"),s.is(":visible")||s.fadeIn(timeFx)):(r.removeClass("selected"),n.children(".filter:contains('"+l+"')").remove(),0==h(".selected").length&&c.click()),m.listToggleFilter(a,i,o)})},clearAllFilters:function(){var e=Aurora.isMobile()?h(".active-filters-mobile"):h(".active-filters"),t=Aurora.isMobile()?h(".active-filters-mboile__filters"):h(".active-filters .filters");h(document).on("click",".active-filters .filters-remove-all",function(){h(".active-filters .pre-filter").length&&(g.location.href=h(".active-filters .pre-filter").attr("href")),h.each(h(".selected input"),function(){var e=h(this).val(),t=h(this).attr("rel"),r=h(this).closest("fieldset").find("h5").text();m.listToggleFilter(e,t,r,!1)}),m.getProducts(),t.html(""),h(".selected").removeClass("selected").find("input").attr("checked",!1),e.fadeOut(timeFx)})},deactivateFilterFromList:function(){h(document).on("click",".active-filters .filter",function(){if(h(this).hasClass("pre-filter"))return!0;var e=h(this).attr("data-value"),t=h("input[value='"+e+"']"),r=t.attr("rel"),i=t.closest("fieldset").find("h5").text();t.attr("checked",!1).parent().removeClass("selected"),h(this).remove(),0==h(".selected").length&&h(".active-filters .filters-remove-all").click(),m.listToggleFilter(e,r,i)})},removeFilterCounter:function(){h.each(h(elem.filter),function(e,t){var r=h(this),i=r.find("input"),a=r.text().replace(/\([0-9]+\)/gi,"");r.text(a).prepend(i)})},setCategoryBannerSlider:function(){var e=h(".category-banner-slider .slider");e.is(":empty")?e.hide().parent().addClass("empty"):1<e.children().length&&e.bxSlider({prevText:"",nextText:"",auto:!0})},setOrderBySelect:function(e){var t=location.href.match(/O=([^&]*)/);t&&void 0!==t[1]&&(h(".order-by-select").val(t[1]),m.shelfOptions.order=t[1]),h(elem.orderBySelect).select2({minimumResultsForSearch:1/0,theme:"orderBy",placeholder:e}).on("change",function(e,t,r,i){m.getProductsFromOrderRequest(h(this).val()),m.setURLParameterWithOutReloadPage(h(this).val())})},toggleViewType:function(){h(document).on("click",elem.viewTypeButton,function(){var e=h(this),t=e.data("shelf-view");e.hasClass("active")||(e.addClass("active").siblings(".change-view").removeClass("active"),function(e){var t=h(elem.shelfLoader),r=h(elem.shelfContent),i=r.find(".main "+elem.productItem),a=elem.productItem.replace(".","")+"--inline "+elem.productItem.replace(".","")+"--list-shelf";t.fadeIn(timeFx,function(){i.removeClass(a),r.removeClass("shelf-view-list"),"list"==e&&(i.addClass(a),r.addClass("shelf-view-"+e)),setTimeout(function(){t.fadeOut(timeFx)},timeFx)})}(t))})},setAmount:function(){var e=h(".resultado-busca-numero .value").first().text();e+="1"==e?" producto":" productos",Aurora.isMobile()?h(".shelf-header .amount-mobile").text(e):h(".shelf-header .title-wrapper .amount").text(e)},listGetCurrent:function(){var e=!1,t=h(elem.shelfContent).find("script").eq(0).html();if(void 0!==t){var r=t.match(/sl=(.+?)&/gi).toString().replace("sl=","").replace("&",""),i=t.match(/ps=(.+?)&/gi).toString().replace(/ps=/i,"").replace("&",""),a=t.match(/cc=(.+?)&/gi).toString().replace("cc=","").replace("&",""),l=t.match(/pagecount_.+=.+?\;/gi).toString().replace(/.+?=|;|\D/gi,"");m.shelfOptions.template=r,m.shelfOptions.quantity=i,m.shelfOptions.columns=a;var o=function(){var e="";return t.match(/fq=(.+?)&/gi)!=c&&(e+=t.match(/fq=(.+?)&/gi).join("").toString().replace(/^&|&$/g,"")),t.match(/ft=(.+?)&/gi)!=c&&(e+="&"+t.match(/ft=(.+?)&/gi).toString().replace("&","")),e};t.includes("fq=H")&&(m.isCollectionPage=!0,m.collectionId=decodeURIComponent(t).match(/fq=H:([^&]*)/)[1]),m.activeFilters[vtxctx.categoryName]=o(),m.categoryParam=o();var s=g.location.search;if(/filters=/i.test(s))s.split("&").filter(function(e){return/filters=/.test(e)})[0].split("filters=")[1].split(",").forEach(function(e){var t=h('input[rel="'+e+'"]'),r=t.attr("name");t.attr("checked",!0),t.parent().addClass("selected"),m.activeFilters[r]=e}),e=!0;Aurora.isExpressShippingActivated()&&(e=!(m.activeFilters["90mins"]="")),1==l&&(m.limitReached=!0,Aurora.isMobile()&&h(".load-more-products").hide())}else m.shelfOptions.quantity=16,m.shelfOptions.columns=4;e&&m.getProducts()},listToggleFilter:function(e,t,r){var i=!(3<arguments.length&&arguments[3]!==c)||arguments[3];m.activeFilters[e]==c?(m.activeFilters[e]=t,m.shelfOptions.page=1):delete m.activeFilters[e],m.pushHistoryState(m.activeFilters),i&&m.getProducts()},pushHistoryState:function(e){var t=Object.assign({},e),r=g.location,i=r.search,a=r.pathname,l=i.split("&");delete t[vtxctx.categoryName];var o=Object.keys(t).map(function(e){return t[e]}).join(","),s=a+(""===i?"?":"")+l.filter(function(e){return!/filters=/i.test(e)}).concat(["filters="+o]).join("&");g.history.pushState(e,document.title,s)},getProducts:function(){var r=!(0<arguments.length&&arguments[0]!==c)||arguments[0];m.isRequesting=!0;var i=h(elem.shelfLoader);r||Aurora.isMobile()||h(".loader_more .loader").show(),i.fadeIn(timeFx);var a="";h.each(m.activeFilters,function(e,t){a+="&"+t}),Aurora.isMobile()&&h.each(m.activeFiltersMobile,function(e,t){a+="&"+t.param}),m.shelfOptions&&m.shelfOptions.order&&(a+="&O="+m.shelfOptions.order),m.activeRequest&&m.activeRequest.abort(),a&&(m.activeRequest=Aurora.getProductShelf(a,m.shelfOptions.page,m.shelfOptions.quantity,m.shelfOptions.columns,m.shelfOptions.template).done(function(e){r?(h(elem.productShelf).find("ul:first").empty(),m.limitReached=!1,Aurora.isMobile()&&h(".load-more-products").show()):Aurora.isMobile()||h(".loader_more .loader").hide(),h(elem.searchListEmptyMessage).hide();var t=h(e).find("> ul > li");h(elem.productShelf).fadeIn(timeFx,easing).find("ul:first").append(t),m.isCollectionPage||(m.setFirstFeaturedProducts(),m.removeFeaturedProductsRepeated()),h(".shelf-view-list").length&&h(".product-item").addClass(elem.productItem.replace(".","")+"--inline"),u.Minicart.orderForm!=c&&Aurora.setProductCartAmount(vtexjs.checkout.orderForm.items),Aurora.setProductItemsData(),i.fadeOut(timeFx),m.isRequesting=!1,m.activeRequest=null,(""==e||t.length<m.shelfOptions.quantity)&&(m.limitReached=!0,Aurora.isMobile()&&h(".load-more-products").hide()),h(g).scrollTop(h(g).scrollTop()+1)})),u.Utils.getSearchTotalItems("?"+a).then(function(e){(""===a||"0"===e)&&h(".shelf-content .vitrine .product-shelf ul").text("No encontramos resultados para tu búsqueda"),h(".title-wrapper .amount").text(e+" productos")})},setFirstFeaturedProducts:function(){m.isFirstLoaded||(m.isFirstLoaded=!0,m.appendFeaturedProducts())},appendFeaturedProducts:function(){null!=m.$featuredProducts&&(h(elem.productShelf).find("ul").first().prepend(m.$featuredProducts),m.featuredClasses=m.$featuredProducts.find(".product-item").map(function(e,t){return".product-item--"+t.dataset.id}).get())},removeFeaturedProductsRepeated:function(){if(null!=m.featuredClasses){var t=h(elem.productShelf).find("ul").first();m.featuredClasses.forEach(function(e){1<t.find(e).length&&t.find(e).eq(1).parent().next().addBack().remove()})}},infiniteScroll:function(){h("li[layout]").length&&h(g).scroll(function(){h(this).scrollTop()+g.innerHeight>h(elem.shelfContent).offset().top+h(elem.shelfContent).height()&&!m.isRequesting&&!m.limitReached&&(m.shelfOptions.page=m.shelfOptions.page+1,m.getProducts(!1))})},NonDisponibility:function(){var e=location.search.match(/categoria\=([^&]*)/)[1],t=decodeURI(e);console.log(t),h(".js-param").text(t)},emtpySearchText:function(){if(h("body").hasClass("page-404")){var e=h(".empty-search-message .subtitle").text().replace(/\"/g,"");h(".empty-search-message .subtitle").text(e)}else{var t=h("meta[name='Abstract']").attr("content");h(elem.emptySearchTerm).text(decodeURIComponent(escape(t))||t)}},departmentSlider:function(){var e={nextText:"",prevText:"",minSlides:1,maxSlides:5,moveSlides:1,controls:!0,pager:!1};Aurora.isMobile()?h.extend(e,{maxSlides:3,slideMargin:20,slideWidth:88,moveSlides:3,controls:!1,pager:!0,infiniteLoop:!1}):e.slideWidth=90*h(elem.departmentSlider).width()/100/e.maxSlides,h(elem.departmentSlider).bxSlider(e)},departmentDescription:function(){h(elem.departmentDescription).find(".font-icn-cat").addClass("cat-"+u.Utils.sanitizeString(vtxctx.departmentName))},buildSubcatLayout:function(l,o){var e=h(elem.departmentSubcategoryTemplate).html(),s=Handlebars.compile(e);return l.children.map(function(e){e.departmentId=l.id;var t=u.Utils.sanitizeString(l.name),r=u.Utils.sanitizeString(e.name),i=Math.round(1e4*Math.random()),a=Aurora.isMobile()&&!o?"-mobile":"";return e.imageUrl="/arquivos/"+t+"_"+r+a+".jpg?v="+i,e.alt=e.name+" - "+l.name,s(e)}).join("")},departmentFoodSubcategories:function(){Aurora.categoryStoreActions.getCategoryTree().then(function(e){var t=g.vtxctx,r=h(elem.departmentSubcategoriesWrapper).find(".loader"),i=h(elem.departmentSubcategoriesWrapper).find(".subcategories");if(e.length&&t){var a=e.filter(function(e){return e.id.toString()===t.departmentyId})[0];h(m.buildSubcatLayout(a,!0)).appendTo(i),r.fadeOut(timeFx,easing)}})},departmentNonFoodSubcategories:function(){var l=function(i,e){var t=m.generateUbicationDepartment(u.Utils.sanitizeString(e.name),e.children),r=t.length?t:e.children;t.length&&(e.children=r);var a={"grid-4x2":[3,4],"grid-4x3":[5,6,7,8,"electrodomesticos","deportes","bebes-y-ninos","tecnologia","tecnologia-mobile","automovil-y-ferreteria"],"grid-4x4":[9,10,11,12,13,14,"hogar","supermercado"]},l={"grid-electrodomesticos-item-sizes":["50x66","25x66","25x66","50x33","50x33"],"grid-deportes-item-sizes":["50x66","50x33","50x33","50x33","50x33"],"grid-supermercado-item-sizes":["50x50","25x25","25x25","50x25","25x25","25x25","25x25","25x25","50x25","50x25","25x25","25x25","50x25","50x25","25x25","25x25"],"grid-bebes-y-ninos-item-sizes":["50x66","50x33","50x33","50x33","50x33"],"grid-hogar-item-sizes":["50x50","25x25","25x25","50x25","50x25","25x25","25x25","50x25","50x25"],"grid-tecnologia-item-sizes":["50x66","50x33","25x33","25x33","50x33","50x33"],"grid-automovil-y-ferreteria-item-sizes":["50x66","25x33","25x33","25x33","25x33"],"grid-tecnologia-mobile-item-sizes":["100x50","100x50","50x50","50x50","50x50","50x50"],"grid-3-item-sizes":["50x100","50x50","50x50"],"grid-4-item-sizes":["50x100","50x50","25x50","25x50"],"grid-5-item-sizes":["50x66","50x33","50x33","50x33","50x33"],"grid-6-item-sizes":["50x66","50x33","25x33","25x33","50x33","50x33"],"grid-7-item-sizes":["50x66","25x33","25x33","50x33","50x33","25x33","25x33"],"grid-8-item-sizes":["50x66","25x33","25x33","50x33","25x33","25x33","25x33","25x33"],"grid-9-item-sizes":["50x50","25x25","25x25","50x25","50x25","25x25","25x25","50x25","50x25"],"grid-10-item-sizes":["50x50","25x25","25x25","50x25","50x25","25x25","25x25","25x25","25x25","50x25"],"grid-11-item-sizes":["50x50","25x25","25x25","50x25","50x25","25x25","25x25","25x25","25x25","25x25","25x25"],"grid-12-item-sizes":["50x50","25x25","25x25","50x25","25x25","25x25","25x25","25x25","25x25","25x25","25x25","25x25"],"grid-13-item-sizes":["50x50","25x25","25x25","25x25","25x25","25x25","25x25","25x25","25x25","25x25","25x25","25x25","25x25"],"grid-14-item-sizes":["50x50","25x25","25x25","50x25","50x25","50x25","25x25","25x25","25x25","25x25","25x25","25x25","25x25","25x25"]},o=u.Utils.sanitizeString(e.name),s=l["grid-"+o+"-item-sizes"]?o:r.length,n=function(e){var t=i.width(),r=function(){switch(e){case"grid-4x2":return.5*t;case"grid-4x3":return.75*t;case"grid-4x4":default:return t}}();(r=Aurora.isMobile()?"auto":Math.floor(r))%2==0?i.css("height",r):i.css("height",r-1)},c=function(){for(var e in a)if(-1!=a[e].indexOf(s))return i.addClass(e),i.addClass("grid-"+s),n(e),e}(),d=l["grid-"+s+"-item-sizes"];r.forEach(function(e,t){e.gridSize=Aurora.isMobile()?"mobile":d[t]}),h(g).on("onResize",function(){n(c)});h(m.buildSubcatLayout(e,!1)).appendTo(i)};Aurora.categoryStoreActions.getCategoryTree().then(function(e){var r=g.vtxctx,i=h(elem.departmentSubcategoriesWrapper).find(".loader"),a=h(elem.departmentSubcategoriesWrapper).find(".subcategories");if(e.length&&r){var t=e.filter(function(e){return e.id.toString()===r.departmentyId})[0];l(a,t),i.fadeOut(timeFx,easing)}else Aurora.categoryStoreActions.getCategoryTree().then().done(function(e){var t=e.filter(function(e){return e.id.toString()===r.departmentyId})[0];l(a,t),i.fadeOut(timeFx,easing)})})},generateUbicationDepartment:function(r,e){var i={electrodomesticos:{"Climatización":5,Cocina:3,"Cuidado Personal":4,"Lavadoras y Secadoras":2,"Refrigeración":1},deportes:{"Accesorios deportivos":5,Balones:4,Bicicletas:3,Camping:2,"Máquinas de ejercicio":1},supermercado:{Abarrotes:1,"Aseo de hogar":11,"Bebidas Liquidas":7,Bebidas:7,Carne:5,"Cuidado Personal":12,Desayuno:3,"Dulces y Postres":13,"Frutas y Verduras":4,"Panaderia y Pasteleria":8,"Pescados y Mariscos":2,"Pollo y aves":6,"Productos Congelados":15,"Quesos y Fiambre":9,"Vinos y Licores":10},"bebes-y-ninos":{"Accesorios y ropa para bebé":5,"Alimentación":3,"Aseo para bebé":4,Dormitorio:2,"Paseo y viajes":1},hogar:{"Asadores y BBQ":2,"Automóvil":7,"Baño":6,Cocina:3,Dormitorio:1,"Ferretería":5,Mascotas:9,"Organización y decoración":8,Sala:4},tecnologia:{"Informática":5,"Consolas y Videojuegos":6,"Celulares y Tablets":2,Audio:3,"Cámaras y Drones":4,"Televisores y Video":1},"automovil-y-ferreteria":{Llantas:1,"Baterías":3,Seguridad:5,"Limpieza y mantenimiento":2,Accesorios:4}},a=new Array,l=void 0;return i[r]&&h.each(e,function(e,t){(l=i[r][t.name])&&(a[l-1]=t)}),a},departmentBrandSlider:function(){h(elem.departmentBrandSlider).is(":empty")&&h(".brand-slider-wrapper").hide();var e={nextText:"",prevText:"",minSlides:1,maxSlides:5,moveSlides:1,controls:!0,pager:!1};Aurora.isMobile()&&h.extend(e,{controls:!1,pager:!0,maxSlides:3});var t=Aurora.isMobile()?98:90;e.slideWidth=h(elem.departmentBrandSlider).width()*t/100/e.maxSlides,h(elem.departmentBrandSlider).bxSlider(e)},departmentCollectionSlider:function(){var e=h(elem.departmentCollectionSlider);if(e.length||h(".product-content-wrapper--sale").hide(),e.find(".helperComplement").remove(),Aurora.isMobile())e.addClass("swiper-wrapper").parent().addClass("swiper-container swiper-container-department").end().children().addClass("swiper-slide").end().after('<div class="swiper-pagination swiper-pagination-department"></div>'),new Swiper(".swiper-container-department",{slidesPerView:1,pagination:".swiper-pagination-department",spaceBetween:6,paginationClickable:!0});else{var t={nextText:"",prevText:"",minSlides:1,maxSlides:3,moveSlides:1,controls:!0,pager:!1};t.slideWidth=90*e.width()/100/t.maxSlides,e.bxSlider(t)}},setSearchTerm:function(){h(elem.searchTerm).text(vtxctx.searchTerm)},cacheCategoryFilters:{},setSearchMultipleFilters:function(){var i=decodeURIComponent(g.location.search.match(/sl=.+/gi).toString().replace(/&.+/gi,"").replace("sl=","")).split(","),e=h(elem.searchListFiltersLoader);e.show();for(var a=Aurora.isMobile()?h('<div class="swiper-wrapper"></div>').appendTo(h(elem.searchListFilters).addClass("swiper-container swiper-container-list-filters")):h(elem.searchListFilters),l=[],t=function(t){var e='<button type="button" class="search-filter '+(Aurora.isMobile()?"swiper-slide ":"")+(0==t?"active":"")+'" data-filter="'+i[t]+'"><span class="text">'+i[t]+'</span><span class="amount"></span></button>';if(Aurora.isMobile()){var r='<div class="search-list-item '+(0==t?"active":"")+'" data-filter="'+i[t]+'">'+i[t]+"</div>";h(".search-list-items.mobile").append(r)}l.push(u.Utils.getSearchTotalItems("?ft="+i[t]).done(function(e){h(".search-filter[data-filter="+i[t]+"] .amount").html("("+e+")")})),h(e).appendTo(a).on("click",function(){var e=h(this).data("filter");h(this).addClass("active").siblings().removeClass("active"),Aurora.isMobile()&&(h(".search-list-item.active").removeClass("active"),h('.search-list-item[data-filter="'+e+'"]').addClass("active")),m.getSearchInfo(e)}),0==t&&m.getSearchInfo(i[t])},r=0;r<i.length;r++)t(r);Aurora.isMobile()&&h.when.apply(this,l).done(function(){h(".search-filter.swiper-slide").each(function(e,t){var r=h(t);r.outerWidth(r.outerWidth())}),m.searchFilterSlider=new Swiper(".swiper-container-list-filters",{slidesPerView:"auto",slideToClickedSlide:!0,spaceBetween:6})}),m.showFilterControls(),m.searchFiltersControls(),h(g).on("onResize",function(e){return m.showFilterControls()}),Aurora.isMobile()&&h(document).on("click",".show-search-list-items",m.showSearchListItems).on("click",".hide-search-list-items",m.hideSearchListItems).on("click",".search-list-item:not(.active)",m.selectListItem),e.fadeOut(timeFx,easing)},showSearchListItems:function(){h(".show-search-list-items").hide(),h(".hide-search-list-items").show(),h(".search-list-items").stop(!0,!0).slideDown()},hideSearchListItems:function(){h(".show-search-list-items").show(),h(".hide-search-list-items").hide(),h(".search-list-items").stop(!0,!0).slideUp()},selectListItem:function(){var e=h(this).data("filter"),t=h('.search-filter[data-filter="'+e+'"]').click().index();m.searchFilterSlider&&m.searchFilterSlider.slideTo(t)},getSearchInfo:function(t){var r=h(elem.searchListCategoryFiltersLoader);h(elem.shelfLoader).fadeIn(timeFx),r.fadeIn(timeFx,easing),m.cacheCategoryFilters[t]==c?(m.cacheCategoryFilters[t]={},Aurora.isMobile()&&(m.cacheCategoryFilters[t].isMobile=!0),m.getCategoriesFilters("?map=c&ft="+t).done(function(e){0<e.CategoriesTrees.length&&(m.cacheCategoryFilters[t].categories=e.CategoriesTrees),r.fadeOut(timeFx,easing),m.setSearchList(t)})):(m.setSearchList(t),r.fadeOut(timeFx,easing))},setSearchList:function(e){m.cacheCategoryFilters[e].categories!=c?(m.setSearchCategoryFilters(e),m.setSearchProducts(e)):m.setEmptySearch(e)},setSearchCategoryFilters:function(e){var t=h("#category-filter-template").html(),r=Handlebars.compile(t)(m.cacheCategoryFilters[e]);Aurora.isMobile()?h(".filters-mobile__middle-content").empty().append(r):h(elem.searchListCategoryFilters).empty().append(r).fadeIn(timeFx,easing).addClass("ready")},showFilterControls:function(){var e=h(elem.searchListFilters)[0];e.scrollWidth>e.clientWidth?(h(elem.searchListFiltersWrapper).removeClass("hide-controls"),h(elem.searchListFiltersWrapper).next(".shelf-content").css("padding","0px 50px")):(h(elem.searchListFiltersWrapper).addClass("hide-controls"),h(elem.searchListFiltersWrapper).next(".shelf-content").css("padding","0px"))},searchFiltersControls:function(){h(document).on("click",elem.searchListFiltersSlideControls,function(){var e=h(this),t=h(elem.searchListFilters),r=(t[0].scrollWidth,t.scrollLeft()),i=0;e.hasClass("prev")&&(i=r-130),e.hasClass("next")&&(i=r+130),t.animate({scrollLeft:i})})},setEmptySearch:function(e){h(elem.shelfLoader).fadeOut(timeFx,easing),h(elem.searchListProductWrapper).hide(),h(elem.searchListCategoryFilters).fadeOut(timeFx,easing),h(elem.searchListEmptyMessage).fadeIn(timeFx,easing),h(elem.emptySearchTerm).text(e),m.limitReached=!0,Aurora.isMobile()&&h(".load-more-products").hide()},setSearchProducts:function(e){m.activeFilters.freeText="ft="+e,m.shelfOptions.page=1,m.getProducts()},categoryTypeCheck:function(e){if(!e)return console.log("'vtxctx' is not defined");var t=parseFloat(e.departmentyId);-1!=[2000001].indexOf(t)&&h("body").addClass("category--food"),-1!=[142,116,1,1000030,47].indexOf(t)&&h("body").addClass("category--non-food")},checkActiveFilters:function(){var e=h(".search-multiple-navigator").find(".ver-filtros"),t=e.attr("href");if(e.length){var r=e.parents("fieldset"),i="<a class='filter pre-filter' href='"+t+"'>"+r.find("h5").text()+" : "+r.find("label").text()+"</a>";r.hide(),h(".active-filters .filters").append(i),h(".active-filters").is(":visible")||h(".active-filters").fadeIn(timeFx)}},compareEventListeners:function(){var c=function(e){if(!Array.isArray(e))return console.log("itemIdArray is not an Array");for(var r=function(e){var t=h(elem.compareHeaderProductTemplate).html(),r=Handlebars.compile(t)(e),i=h(elem.compareHeaderItem+".empty").first(),a=elem.compareHeaderItem.replace(".","")+"--"+e.productId;if(!i.length){var l='<div class="'+elem.compareHeaderItem.replace(".","")+" "+a+'"></div>';i=h(l).appendTo(elem.compareHeaderItems)}h(r).appendTo(i).hide().fadeIn(timeFx,easing),h(i).removeClass("empty").addClass(a)},t=[],i=0;i<e.length;i++){var a=e[i],l=h(elem.productItem+"--"+a).first();if(l.length){var o={productId:l.data("id"),imageUrl:l.find(elem.productItemImageWrapper+" img").attr("src"),productName:l.find(elem.productItemName).text()};r(o)}else t.push(a)}t.length&&u.Catalog.searchProductArray(t).done(function(e){for(var t in e)e[t].imageUrl=e[t].items[0].images[0].imageUrl,r(e[t])}),3!==h(".compare-header__item.empty").length||Aurora.isMobile()||h(g).scrollTop(h(g).scrollTop()+80)},r=function(e){!function(e){var t=elem.compareHeaderItem.replace(".","")+"--"+e,r=h("."+t),i=Aurora.isMobile()?Math.ceil(h(elem.compareHeaderItems).innerWidth()/h(elem.compareHeaderItem).outerWidth()):4;a.getItems().length>=i?r.remove():r.find(elem.compareHeaderProduct).fadeOut(timeFx,easing,function(){h(this).remove(),r.addClass("empty").removeClass(t)}),0!==a.getItems().length||Aurora.isMobile()||0===h(g).scrollTop()||h(g).scrollTop(h(g).scrollTop()-80)}(e),h(elem.productItem+"--"+e).siblings(elem.productCompare).find(elem.productCompareCheckbox).attr("checked",!1)};h(document).on("change",elem.productCompareCheckbox,function(e){return function(e){if(!e.currentTarget.value)return console.log("Value is not defined");var t=e.currentTarget.value;e.currentTarget.checked?a.addItem(t):a.removeItem(t)}(e)}),h(g).on("Fizzmod.Compare.Initialized",function(e,t){return function(e){if(Aurora.isMobile()){h(elem.compareSliderArrows).addModifier("limit-left");var t=[];try{t=JSON.parse(t)}catch(e){}var r=Math.floor(h(elem.compareHeaderItems).innerWidth()/h(elem.compareHeaderItem).outerWidth()),i=Math.max(t.length,4);if(i<r){var a=r-i,l="";if(0<a){for(var o=0;o<a;o++)l+='<div class="compare-header__item empty"></div>';h(elem.compareHeaderItems).append(l)}}}if(!e)return console.log("Items not defined");e=JSON.parse(e),c(e);for(var s=0;s<e.length;s++){var n=e[s];h(elem.productCompareCheckbox+'[value="'+n+'"]').attr("checked",!0)}}(t)}),h(g).on("Fizzmod.Compare.ItemAdded",function(e,t){return function(e){c([e])}(t)}),h(g).on("Fizzmod.Compare.ItemRemoved",function(e,t){return r(t)}),h(g).on("Fizzmod.Compare.ItemsUpdated",function(e,t){return function(e){if(e=JSON.parse(e),!Array.isArray(e))return console.log("itemIdArray is not an Array");e.length?(h(elem.compareHeader).fadeIn(timeFx,easing),Aurora.isMobile()||h(elem.compareFakeHeader).show(),h("body").addClass("compare-active")):(h(elem.compareHeader).fadeOut(timeFx,easing),Aurora.isMobile()||h(elem.compareFakeHeader).hide(),h("body").removeClass("compare-active")),1<e.length?h(elem.compareHeaderCompare).attr("disabled",!1):h(elem.compareHeaderCompare).attr("disabled",!0),Aurora.isMobile()||(4<e.length?h(elem.compareSliderArrows).addClass(elem.compareSliderArrows.replace(".","")+"--active"):h(elem.compareSliderArrows).removeClass().addClass(""+elem.compareSliderArrows.replace(".","")))}(t)}),h(document).on("click",elem.compareHeaderProductRemove,function(e){return function(e){var t=e.currentTarget.dataset.id;if(!t)return console.log("Item id not found in dataset");a.removeItem(t)}(e)}),h(document).on("click",elem.compareSliderArrow,function(e){return function(e){var t=h(e.currentTarget),r=h(elem.compareHeaderItems),i=r.scrollLeft(),a=h(elem.compareHeaderItem).width()+1;t.hasClass("arrow--left")?r.animate({scrollLeft:i-a},timeFx,easing):r.animate({scrollLeft:i+a},timeFx,easing)}(e)}),h(document).on("click",elem.compareHeaderCompare,function(e){return function(e){var t="/comparador?productIds="+a.getItems().join(",")+"&returnUrl="+encodeURIComponent(g.location.pathname);g.location.href=t}()}),Aurora.isMobile()||(h(elem.compareHeaderItems).on("scroll",function(e){return function(e){var t=h(e.currentTarget),r=e.currentTarget.clientWidth,i=e.currentTarget.scrollWidth,a=t.scrollLeft();0<a?(h(elem.compareSliderArrows).addModifier("scrolled"),h(elem.compareSliderArrows).removeModifier("limit-left")):(h(elem.compareSliderArrows).removeModifier("scrolled"),h(elem.compareSliderArrows).addModifier("limit-left")),i<=a+r?h(elem.compareSliderArrows).addModifier("limit-right"):h(elem.compareSliderArrows).removeModifier("limit-right")}(e)}),h(g).on("headerScroll",function(e,t){return function(e){h(elem.compareHeader).css("top",e+"px")}(t)}));var a=u.Compare.init()},setCategoryFiltersMobile:function(){var e=h(".search-multiple-navigator"),o=h(".filters-mobile__titles");console.log("$filterTitles: ",o),console.log("find",e.find("fieldset:has(h5)")),e.find("fieldset:has(h5)").each(function(e,t){var r=h(t),i=r.children("h5").text(),a=u.Utils.sanitizeString(i),l='\n\t\t\t\t\t<div class="filters-mobile__title '+a+'" data-group="'+a+'">\n\t\t\t\t\t\t<span class="text">'+i+'</span><span class="filters-applied"></span> <span class="font-icn plus"></span>\n\t\t\t\t\t</div>';r.find("label").each(function(e,t){h(t).contents().filter(function(){return 3==this.nodeType}).replaceWith(m.capitalize(t.innerText))}),r.children("div")[0].children.length&&(o.append(l),r.attr("data-group",a).addClass(a+" filters-mobile__group").appendTo(".filters-mobile__groups"))})},capitalize:function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},setSearchFiltersMobile:function(){var e=h(".search-single-navigator"),n=h(".filters-mobile__titles"),t=e.find("fieldset:has(li)");t.length||h(".filter-button").hide(),t.each(function(e,t){var r=h(t),i=r.children("h5,h4,h3,h2").first(),a=i.text(),l=u.Utils.sanitizeString(a.replace(".","")),o=i.is("h5")?"":"subcategorias";r.find("label").each(function(e,t){t.innerText=m.capitalize(t.innerText)});var s='\n\t\t\t\t<div class="filters-mobile__title '+l+'" data-group="'+l+'">\n\t\t\t\t<span class="text">'+a+'</span>\n\t\t\t\t<span class="filters-applied"></span>\n\t\t\t\t<span class="font-icn plus"></span>\n\t\t\t\t</div>';n.append(s),r.attr("data-group",l).addClass(l+" filters-mobile__group "+o).appendTo(".filters-mobile__groups")}),t.find("input").length?h(".filters-mobile__actions").show():h(".filters-mobile__actions").hide()},bindEventsMobile:function(){h(document).on("click",".filter-button.mobile",m.openFilterOverlay).on("click",elem.filtersMobileTitle,m.onClickFilterTitle).on("click",elem.filtersMobileGroup+" h5, "+elem.filtersMobileGroup+" h4, "+elem.filtersMobileGroup+" h3",m.onClickGroupGoBack).on("click",elem.filtersMobileGroup+" h5 a, "+elem.filtersMobileGroup+" h4 a, "+elem.filtersMobileGroup+" h3 a",m.preventDefault).on("click",elem.filterButtonSaveAndApply,m.onClickSaveAndApplyFilters).on("click",elem.filterButtonApply,m.onClickApplyFilters).on("click",elem.filterButtonReset+", .active-filters-mobile__reset-filters",m.onClickResetFilter).on("click",elem.filterButtonResetSearchFilters,m.resetSearchFilters).on("click","#filters-mobile .overlay__close",m.onClickCloseOverlay).on("click",".active-filters-mobile__filter",m.removeFilter).on("click",".load-more-products",m.loadMoreProducts)},resetSearchFilters:function(){var e=vtxctx.searchTerm;m.isSearchPageFiltered()&&(g.location.href="/busca/?ft="+e)},preventDefault:function(e){e.preventDefault()},openFilterOverlay:function(){Aurora.showOverlay("#filters-mobile")},closeFilterOverlay:function(){Aurora.hideOverlay("#filters-mobile")},onClickResetFilter:function(){Aurora.hideOverlay("#filters-mobile"),m.resetFiltersMobile()},onClickCloseOverlay:function(){m.closeFilterOverlay(),m.refreshInputs(),setTimeout(function(){return m.goToFilterTitles()},100)},onClickFilterTitle:function(){m.goToFilterGroups(this.dataset.group)},onClickGroupGoBack:function(){m.goToFilterTitles()},onClickSaveAndApplyFilters:function(){m.applyFilters(),m.goToFilterTitles()},onClickApplyFilters:function(){m.applyFilters(),m.closeFilterOverlay(),setTimeout(function(){m.goToFilterTitles()},100)},goToFilterTitles:function(){var e=h(elem.filtersMobileGroup+".active");h(elem.filtersMobileTitles).removeClass("move-left-out"),h(elem.filtersMobileGroups).removeClass("move-left-in"),m.refreshInputs(),m.refreshResetFiltersButton(),h(elem.filterButtonSaveAndApply).hide(),m.activeFiltersMobileTemp={},m.disableFilterButtons(),m.isSearchPageFiltered()&&h(elem.filterButtonResetSearchFilters).show(),setTimeout(function(){return e.removeClass("active")},400)},goToFilterGroups:function(e){h(elem.filtersMobileTitles).addClass("move-left-out"),h(elem.filtersMobileGroup+"."+e).addClass("active"),h(elem.filtersMobileGroups).addClass("move-left-in"),h(elem.filterButtonReset+" , "+elem.filterButtonResetSearchFilters).hide();var t=!h(elem.filtersMobileGroup+".active").hasClass("subcategorias");h(elem.filterButtonSaveAndApply).toggle(t),h(elem.filterButtonApply).toggle(t),m.activeFiltersMobileTemp=h.extend({},m.activeFiltersMobile),m.showCleanFilters()},resetFiltersMobile:function(){Aurora.isMobile()?h(".active-filters-mobile"):h(".active-filters"),Aurora.isMobile()?h(".active-filters-mboile__filters"):h(".active-filters .filters");h(".active-filters .pre-filter").length&&(g.location.href=h(".active-filters .pre-filter").attr("href")),m.activeFiltersMobile={},m.shelfOptions.page=1,m.getProducts(),h(".active-filters-mobile__filters").html(""),h(".filters-mobile input").attr("checked",!1).parent().removeClass("selected"),h(".active-filters-mobile").fadeOut(timeFx),m.refreshResetFiltersButton(),m.refreshGroupFilters()},refreshInputs:function(){var e=Object.keys(m.activeFiltersMobileTemp).filter(function(e){return!(e in m.activeFiltersMobile)}),t=Object.keys(m.activeFiltersMobile).filter(function(e){return!(e in m.activeFiltersMobileTemp)});e.forEach(function(e){h('.filters-mobile input[value="'+e+'"]').prop("checked",!1).parent().removeClass("selected")}),t.forEach(function(e){h('.filters-mobile input[value="'+e+'"]').prop("checked",!0).parent().addClass("selected")})},toggleSelectFilterMobile:function(){h(document).on("change",".filters-mobile input",function(e){var t=h(this),r=t.attr("rel"),i=t.val(),a=t.parent().text(),l=t.closest("fieldset").data("group");h(this).parent().toggleClass("selected",this.checked),m.listToggleFilterTemp(i,r,a,l),m.refreshFilterButtons()})},refreshResetFiltersButton:function(){h(elem.filterButtonReset).toggle(0<Object.keys(m.activeFiltersMobile).length)},refreshFilterButtons:function(){h(".filters-mobile__action--apply").toggleClass("disabled",m.eqFilters()),h(".filters-mobile__action--save-and-apply").toggleClass("disabled",m.eqFilters())},disableFilterButtons:function(){h(".filters-mobile__action--apply, .filters-mobile__action--save-and-apply").addClass("disabled")},eqFilters:function(){var e=Object.keys(m.activeFiltersMobile).sort(),t=Object.keys(m.activeFiltersMobileTemp).sort();return e.length==t.length&&e.toString()==t.toString()},applyFilters:function(){m.activeFiltersMobile=h.extend({},m.activeFiltersMobileTemp),m.refreshResetFiltersButton(),m.refreshActiveFilters(),m.shelfOptions.page=1,m.getProducts()},removeFilter:function(){var e=this.dataset.id;delete m.activeFiltersMobile[e],h('.filters-mobile input[value="'+e+'"]').prop("checked",!1).parent().removeClass("selected"),h(this).remove(),0==Object.keys(m.activeFiltersMobile).length&&h(".active-filters-mobile").fadeOut(timeFx),m.shelfOptions.page=1,m.getProducts(),m.refreshGroupFilters()},refreshActiveFilters:function(){var e=h(".active-filters-mobile__filters").empty();if(0<Object.keys(m.activeFiltersMobile).length){var r="";h.each(m.activeFiltersMobile,function(e,t){r+='<div class="active-filters-mobile__filter" data-id="'+e+'">'+t.label+"</div>"}),r&&e.append(r),h(".active-filters-mobile").fadeIn(timeFx)}else h(".active-filters-mobile").fadeOut(timeFx);m.refreshGroupFilters()},refreshGroupFilters:function(){var e=Object.keys(m.activeFiltersMobile).reduce(function(e,t){var r=m.activeFiltersMobile[t];return r.group in e||(e[r.group]=[]),e[r.group].push(r.label.trim()),e},{});for(var t in h(".filters-mobile__title").removeClass("filtered"),h(".filters-applied").empty(),e){h(".filters-mobile__title."+t).addClass("filtered").children(".filters-applied").text("("+e[t].join(", ")+")")}},listToggleFilterTemp:function(e,t,r,i){m.activeFiltersMobileTemp[e]==c?m.activeFiltersMobileTemp[e]={param:t,label:r,group:i}:delete m.activeFiltersMobileTemp[e]},loadMoreProducts:function(){m.isRequesting||m.limitReached||(m.shelfOptions.page++,m.getProducts(!1))},onHeaderSwipe:function(e){var t=o(e.swipestart.coords,1)[0],r=o(e.swipestop.coords,1)[0]<t?"right":"left",i=e.currentTarget.clientWidth,a=e.currentTarget.scrollWidth,l=e.currentTarget.style.transform;l=l?parseFloat(l.match(/translateX(\(.+?\))/g).toString().replace(/translateX\(|px\)/g,"")):0;"right"==r&&Math.round(Math.abs(l)+i);h(elem.compareSliderArrow+"--"+r).click()},showCompareError:function(){Aurora.showOverlay("#compare-error"),setTimeout(function(){Aurora.hideOverlay("#compare-error")},3e3)},verifyDefaultOrderMethod:function(){if(vtxctx&&g.jb_defaultOrderData){var e=m.validateOrderByUrlParameter();if(e)return e;var t=m.validateCollectionURL(jb_defaultOrderData);if(t)return console.log("Entro en colección"+t),t;var r=m.validateBuscaURL(jb_defaultOrderData);return r||m.getCategoryOrder(jb_defaultOrderData,vtxctx.categoryName)}},getCategoryOrder:function(e,t){var r=h(e).filter(function(e){return this.categoryName==t});return!(!r||!r.length)&&r[0].categoryFilter},getBuscaOrderURL:function(e,t){var r=h(e).filter(function(e){return"Busca"==this.categoryName});return!(!r||!r.length)&&r[0].categoryFilter},validateBuscaURL:function(e){if(0<=g.location.href.indexOf("busca/?ft"))try{var t=new URL(g.location),r=t.searchParams.get("ft");return!(!t||!r)&&m.getBuscaOrderURL(e,"Busca")}catch(e){return console.error("Not is posible access:",e),!1}},validateCollectionURL:function(e){try{var t=new URL(g.location),r=t.searchParams.get("fq");return!!(t&&r&&0<=r.indexOf("H:"))&&m.getCategoryOrder(e,r)}catch(e){return console.error("Not is posible access to parameter fq=H:",e),!1}},validateOrderByUrlParameter:function(){try{var e=new URL(g.location),t=e.searchParams.get("O");return!!(e&&t&&0<=t.indexOf("OrderBy"))&&t}catch(e){return console.error("Not is posible access to parameter OrderBy",e),!1}},setURLParameterWithOutReloadPage:function(e){var t=m.replaceQueryParam("O",e,g.location.search),r=g.location.origin+g.location.pathname+t,i=(g.document,g.document.title);g.history.pushState({html:"",pageTitle:i},"",r)},replaceQueryParam:function(e,t,r){var i=new RegExp("([?;&])"+e+"[^&;]*[;&]?"),a=r.replace(i,"$1").replace(/&$/,"");return(2<a.length?a+"&":"?")+(t?e+"="+t:"")},getProductsFromOrderRequest:function(e){m.shelfOptions.order=e,m.shelfOptions.page=1,m.getProducts()}},(g.List=i).initialize()},{}]},{},[1]);
//# sourceMappingURL=list.js.map
