!function n(o,a,c){function d(t,e){if(!a[t]){if(!o[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(h)return h(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var s=a[t]={exports:{}};o[t][0].call(s.exports,function(e){return d(o[t][1][e]||e)},s,s.exports,n,o,a,c)}return a[t].exports}for(var h="function"==typeof require&&require,e=0;e<c.length;e++)d(c[e]);return d}({1:[function(e,t,i){"use strict";var h,r,s,f,n;h=jQuery,r=Fizzmod,s=window,n={items:[],cookieName:"FizzmodCompareItems",cookieExpirationTime:1,events:{INIT:"Fizzmod.Compare.Initialized",ITEM_ADDED:"Fizzmod.Compare.ItemAdded",ITEM_REMOVED:"Fizzmod.Compare.ItemRemoved",ITEMS_UPDATED:"Fizzmod.Compare.ItemsUpdated"},errors:{itemIdNotDefined:"Item ID is not defined",itemIdNotFound:"Item ID was not found in 'items' array",itemAlreadyAdded:"Item ID was already found in 'items' array",noItems:"No items fount in 'items'",itemsObjectsArrayNotDefined:"'itemsObjectsArray' is not defined",itemsObjectsArrayNotAnArray:"'itemsObjectsArray' is not an array",noWantedSpecifications:"No specifications found in products"},options:{log:!1},init:function(e){var i=this,t=r.Utils.getCookie(this.cookieName);return t&&(this.items=t,this.trigger(this.events.ITEMS_UPDATED,JSON.stringify(this.items))),Array.isArray(e)&&e.length&&(this.items=e,this.trigger(this.events.ITEMS_UPDATED,JSON.stringify(this.items))),h(s).on("Fizzmod.Compare.ItemsUpdated",function(e,t){return r.Utils.setCookie(i.cookieName,t,i.cookieExpirationTime)}),this.trigger(this.events.INIT,JSON.stringify(this.items)),this},trigger:function(e,t){this.log(e),h(s).trigger(e,t)},error:function(e,t){this.log(this.errors[e]),t&&this.log("Data: "+t)},log:function(e){this.options.logs&&console.log(e)},search:function(e){var t=1<arguments.length&&arguments[1]!==f?arguments[1]:{},i=2<arguments.length&&arguments[2]!==f?arguments[2]:{};return h.ajax({url:"/api/catalog_system/pub/products/search/?"+e,data:t,beforeSend:function(e){for(var t in i)e.setRequestHeader(t,i[t])}})},getItems:function(){return this.items},addItem:function(e){return e?-1!=this.items.indexOf(e)?this.error("itemAlreadyAdded"):(this.items.push(e),this.trigger(this.events.ITEM_ADDED,e),this.trigger(this.events.ITEMS_UPDATED,JSON.stringify(this.items)),this.items):this.error("itemIdNotDefined")},removeItem:function(e){if(!e)return this.error("itemIdNotDefined");if(-1==this.items.indexOf(e))return this.error("itemIdNotFound");var t=this.items.indexOf(e);return this.items.splice(t,1),this.trigger(this.events.ITEM_REMOVED,e),this.trigger(this.events.ITEMS_UPDATED,JSON.stringify(this.items)),this.items},getItemSpecifications:function(e){var t="fq=productId:"+e;return this.search(t)},getItemsSpecifications:function(){var e=0<arguments.length&&arguments[0]!==f?arguments[0]:this.items;if(!e.length)return this.error("noItems");for(var t="",i=0;i<e.length;i++)t+="fq=productId:"+e[i]+"&";return this.search(t)},cacheSpecs:{},wantedSpecs:[],groupSpecs:{},unwantedSpecs:["allSpecifications","categories","description","DescripciÃ³n","items","link","linkText","productId","productName","productReference","Info General"],compareItems:function(e){var t=1<arguments.length&&arguments[1]!==f?arguments[1]:"allSpecifications";if(!e)return this.error("itemsObjectsArrayNotDefined");if(!Array.isArray(e))return this.error("itemsObjectsArrayNotAnArray");"allSpecifications"!==t&&e.some(function(e){return!(t in e)})&&(t="allSpecifications");for(var i=0;i<e.length;i++){var r=e[i][t];if(r)for(var s=0;s<r.length;s++)-1==this.wantedSpecs.indexOf(r[s])&&-1==this.unwantedSpecs.indexOf(r[s])&&this.wantedSpecs.push(r[s]);-1==this.wantedSpecs.indexOf("brand")&&-1==this.unwantedSpecs.indexOf("brand")&&this.wantedSpecs.push("brand")}if(!this.wantedSpecs.length)return this.error("noWantedSpecifications");for(var n={},o=0;o<e.length;o++)for(var a=e[o],c=0;c<this.wantedSpecs.length;c++){var d=this.wantedSpecs[c];n[d]==f&&(n[d]={}),a[d]?n[d][a.productId]=a[d].toString():n[d][a.productId]=null}return h.extend(this.cacheSpecs,n),n}},r.Compare=n},{}]},{},[1]);
//# sourceMappingURL=fizzmod.compare.js.map
